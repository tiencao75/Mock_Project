# # Y√™u c·∫ßu phi√™n b·∫£n CMake
# cmake_minimum_required(VERSION 3.10)

# # ƒê·∫∑t t√™n project
# project(MyApplication)

# # ƒê·∫∑t c·ªù bi√™n d·ªãch v√† phi√™n b·∫£n C++
# set(CMAKE_CXX_STANDARD 17)
# set(CMAKE_CXX_STANDARD_REQUIRED ON)

# # C·ªù bi√™n d·ªãch cho vi·ªác thu th·∫≠p coverage
# set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wall -g -fprofile-arcs -ftest-coverage")
# set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -fprofile-arcs -ftest-coverage")

# # C√°c th∆∞ m·ª•c c·∫ßn th√™m v√†o ƒë∆∞·ªùng d·∫´n t√¨m ki·∫øm header
# include_directories(
#     /usr/local/include/taglib
#     /usr/local/include
#     ${CMAKE_SOURCE_DIR}/header
#     ${CMAKE_SOURCE_DIR}/header/include
#     ${CMAKE_SOURCE_DIR}/header/model
#     ${CMAKE_SOURCE_DIR}/header/controller
#     ${CMAKE_SOURCE_DIR}/header/view
# )

# # C√°c th∆∞ vi·ªán c·∫ßn li√™n k·∫øt
# link_directories(/usr/local/lib /usr/lib/x86_64-linux-gnu)
# set(LIBRARIES
#     avformat avcodec avutil swresample swscale
#     tag SDL2 SDL2_mixer SDL2_ttf SDL2_image stdc++fs z m pthread
# )

# # C√°c th∆∞ m·ª•c ch·ª©a t·ªáp ngu·ªìn
# set(SRC_DIR ${CMAKE_SOURCE_DIR}/source)
# set(MODEL_DIR ${SRC_DIR}/model)
# set(CONTROLLER_DIR ${SRC_DIR}/controller)
# set(VIEW_DIR ${SRC_DIR}/view)
# set(INCLUDE_DIR ${SRC_DIR}/include)

# # T√¨m t·∫•t c·∫£ c√°c t·ªáp ngu·ªìn
# file(GLOB MODEL_SOURCES ${MODEL_DIR}/*.cpp)
# file(GLOB CONTROLLER_SOURCES ${CONTROLLER_DIR}/*.cpp)
# file(GLOB VIEW_SOURCES ${VIEW_DIR}/*.cpp)
# file(GLOB INCLUDE_SOURCES ${INCLUDE_DIR}/*.cpp)
# set(MAIN_SOURCE ${SRC_DIR}/main.cpp)

# # T·ªïng h·ª£p t·∫•t c·∫£ c√°c t·ªáp ngu·ªìn
# set(SOURCES ${MODEL_SOURCES} ${CONTROLLER_SOURCES} ${VIEW_SOURCES} ${INCLUDE_SOURCES} ${MAIN_SOURCE})

# # Th∆∞ m·ª•c ch·ª©a c√°c t·ªáp ƒë·ªëi t∆∞·ª£ng
# set(OBJ_DIR ${CMAKE_BINARY_DIR}/obj)

# # T·∫°o th∆∞ m·ª•c ch·ª©a t·ªáp ƒë·ªëi t∆∞·ª£ng n·∫øu ch∆∞a t·ªìn t·∫°i
# file(MAKE_DIRECTORY ${OBJ_DIR})

# # T·∫°o t·ªáp ƒë·ªëi t∆∞·ª£ng t·ª´ c√°c t·ªáp ngu·ªìn
# add_executable(main ${SOURCES})
# target_link_libraries(main ${LIBRARIES})

# # C·∫•u h√¨nh b√†i ki·ªÉm th·ª≠ (test)
# enable_testing()

# # T√¨m Google Test
# find_package(GTest REQUIRED)
# include_directories(${GTEST_INCLUDE_DIRS})

# # T√¨m c√°c b√†i ki·ªÉm th·ª≠ trong th∆∞ m·ª•c test
# file(GLOB TEST_SOURCES ${CMAKE_SOURCE_DIR}/test/*.cpp)
# add_executable(unit_tests ${TEST_SOURCES})

# # Li√™n k·∫øt c√°c th∆∞ vi·ªán c·∫ßn thi·∫øt cho b√†i ki·ªÉm th·ª≠
# target_link_libraries(unit_tests ${GTEST_LIBRARIES} pthread ${LIBRARIES})

# # Th√™m quy t·∫Øc ƒë·ªÉ ch·∫°y test
# add_test(NAME UnitTests COMMAND unit_tests)

# # Quy t·∫Øc d·ªçn d·∫πp
# add_custom_target(clean_all
#     COMMAND ${CMAKE_COMMAND} -E remove_directory ${CMAKE_BINARY_DIR}  # X√≥a th∆∞ m·ª•c build
#     COMMAND ${CMAKE_COMMAND} -E remove_directory ${CMAKE_SOURCE_DIR}/coverage_report  # X√≥a th∆∞ m·ª•c b√°o c√°o coverage
#     COMMENT "D·ªçn d·∫πp th∆∞ m·ª•c build v√† coverage_report"
# )
# # Quy t·∫Øc sinh b√°o c√°o coverage
# add_custom_target(coverage
#     COMMAND gcovr -r . --html --html-details -o ${CMAKE_SOURCE_DIR}/coverage_report/index.html
#     COMMENT "T·∫°o b√°o c√°o coverage"
# )

# # Quy t·∫Øc m·∫∑c ƒë·ªãnh
# add_custom_target(build_all
#     DEPENDS unit_tests main
# )

# cmake_minimum_required(VERSION 3.10)

# project(MockProject)

# # ƒê·∫∑t c·ªù bi√™n d·ªãch
# set(CMAKE_CXX_STANDARD 17)
# set(CMAKE_CXX_STANDARD_REQUIRED ON)
# set(CMAKE_CXX_FLAGS "-Wall -g")
# set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/bin)
# set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/lib)

# # Th√™m th∆∞ m·ª•c ch·ª©a t·ªáp header
# include_directories(
#     /usr/local/include/taglib
#     /usr/local/include
#     ${CMAKE_SOURCE_DIR}/header
#     ${CMAKE_SOURCE_DIR}/header/include
#     ${CMAKE_SOURCE_DIR}/header/model
#     ${CMAKE_SOURCE_DIR}/header/controller
#     ${CMAKE_SOURCE_DIR}/header/view
# )

# # C√°c th∆∞ vi·ªán c·∫ßn li√™n k·∫øt
# link_directories(/usr/local/lib /usr/lib/x86_64-linux-gnu)
# set(LIBRARIES
#     avformat avcodec avutil swresample swscale
#     tag SDL2 SDL2_mixer SDL2_ttf SDL2_image stdc++fs z m pthread
# )

# # Th∆∞ m·ª•c ch·ª©a c√°c t·ªáp ngu·ªìn
# set(SRC_DIR ${CMAKE_SOURCE_DIR}/source)
# set(MODEL_DIR ${SRC_DIR}/model)
# set(CONTROLLER_DIR ${SRC_DIR}/controller)
# set(VIEW_DIR ${SRC_DIR}/view)
# set(INCLUDE_DIR ${SRC_DIR}/include)

# # T√¨m t·∫•t c·∫£ c√°c t·ªáp ngu·ªìn .cpp
# file(GLOB MODEL_SOURCES ${MODEL_DIR}/*.cpp)
# file(GLOB CONTROLLER_SOURCES ${CONTROLLER_DIR}/*.cpp)
# file(GLOB VIEW_SOURCES ${VIEW_DIR}/*.cpp)
# file(GLOB INCLUDE_SOURCES ${INCLUDE_DIR}/*.cpp)
# set(MAIN_SOURCE ${SRC_DIR}/main.cpp)

# # T·ªïng h·ª£p t·∫•t c·∫£ c√°c t·ªáp ngu·ªìn
# set(SOURCES ${MODEL_SOURCES} ${CONTROLLER_SOURCES} ${VIEW_SOURCES} ${INCLUDE_SOURCES} ${MAIN_SOURCE})

# # T·∫°o executable t·ª´ t·∫•t c·∫£ c√°c t·ªáp ngu·ªìn
# add_executable(unit_tests ${SOURCES})

# # Th√™m th∆∞ m·ª•c ch·ª©a c√°c b√†i ki·ªÉm tra
# file(GLOB TEST_SOURCES ${CMAKE_SOURCE_DIR}/test/*.cpp)

# # Th√™m t·ªáp ki·ªÉm tra v√†o m·ª•c ti√™u
# add_executable(unit_tests ${SOURCES} ${TEST_SOURCES})

# # Li√™n k·∫øt c√°c th∆∞ vi·ªán
# target_link_libraries(unit_tests ${GTEST_LIBRARIES} pthread ${LIBRARIES})

# # Quy t·∫Øc d·ªçn d·∫πp
# add_custom_target(clean-all
#     COMMAND ${CMAKE_COMMAND} -P ${CMAKE_BINARY_DIR}/cmake_clean.cmake
#     COMMAND ${CMAKE_COMMAND} -E remove_directory ${CMAKE_BINARY_DIR}
# )

# # Th√™m c√°c quy t·∫Øc ki·ªÉm th·ª≠
# enable_testing()
# add_test(NAME UnitTests COMMAND unit_tests)


# cmake_minimum_required(VERSION 3.10)

# project(MockProjectTests)

# set(CMAKE_CXX_STANDARD 17)

# # T√¨m Google Test
# find_package(GTest REQUIRED)

# # Bao g·ªìm c√°c th∆∞ m·ª•c header
# include_directories(header/include header/model header/controller ${GTEST_INCLUDE_DIRS} /usr/local/include)

# # Li√™n k·∫øt th∆∞ vi·ªán TagLib v√† FFmpeg
# link_directories(/usr/local/lib)

# # T·∫°o executable cho test Metadata
# add_executable(test_Metadata 
#     test/test_Metadata.cpp 
#     source/model/Metadata.cpp
# )
# target_link_libraries(test_Metadata 
#     PRIVATE gtest gtest_main pthread tag avformat avcodec avutil
# )

# # T·∫°o executable cho test MediaFile
# add_executable(test_MediaFile 
#     test/test_MediaFile.cpp 
#     source/model/MediaFile.cpp 
#     source/model/Metadata.cpp
# )
# target_link_libraries(test_MediaFile 
#     PRIVATE gtest gtest_main pthread tag avformat avcodec avutil swresample swscale
# )

# # T·∫°o executable cho test MediaLibrary
# add_executable(test_MediaLibrary 
#     test/test_MediaLibrary.cpp 
#     source/model/MediaLibrary.cpp 
#     source/model/MediaFile.cpp 
#     source/model/Metadata.cpp 
#     source/controller/ExceptionLib.cpp
# )
# target_link_libraries(test_MediaLibrary 
#     PRIVATE gtest gtest_main pthread tag avformat avcodec avutil swresample swscale
# )

# # B·∫≠t t√≠nh nƒÉng testing v√† ƒëƒÉng k√Ω c√°c test v·ªõi ctest
# enable_testing()
# add_test(NAME MetadataTest COMMAND test_Metadata)
# add_test(NAME MediaFileTest COMMAND test_MediaFile)
# add_test(NAME MediaLibraryTest COMMAND test_MediaLibrary)


# # Y√™u c·∫ßu phi√™n b·∫£n CMake
# cmake_minimum_required(VERSION 3.10)

# # ƒê·∫∑t t√™n project
# project(MyApplication)

# # ƒê·∫∑t c·ªù bi√™n d·ªãch v√† phi√™n b·∫£n C++
# set(CMAKE_CXX_STANDARD 17)
# set(CMAKE_CXX_STANDARD_REQUIRED ON)

# # C·ªù bi√™n d·ªãch cho vi·ªác thu th·∫≠p coverage
# set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wall -g -fprofile-arcs -ftest-coverage")
# set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -fprofile-arcs -ftest-coverage")

# # C√°c th∆∞ m·ª•c c·∫ßn th√™m v√†o ƒë∆∞·ªùng d·∫´n t√¨m ki·∫øm header
# include_directories(
#     /usr/local/include/taglib
#     /usr/local/include
#     ${CMAKE_SOURCE_DIR}/header
#     ${CMAKE_SOURCE_DIR}/header/include
#     ${CMAKE_SOURCE_DIR}/header/model
#     ${CMAKE_SOURCE_DIR}/header/controller
#     ${CMAKE_SOURCE_DIR}/header/view
# )

# # C√°c th∆∞ vi·ªán c·∫ßn li√™n k·∫øt
# link_directories(/usr/local/lib /usr/lib/x86_64-linux-gnu)
# set(LIBRARIES
#     avformat avcodec avutil swresample swscale
#     tag SDL2 SDL2_mixer SDL2_ttf SDL2_image stdc++fs z m pthread
# )

# # C√°c th∆∞ m·ª•c ch·ª©a t·ªáp ngu·ªìn
# set(SRC_DIR ${CMAKE_SOURCE_DIR}/source)
# set(MODEL_DIR ${SRC_DIR}/model)
# set(CONTROLLER_DIR ${SRC_DIR}/controller)
# set(VIEW_DIR ${SRC_DIR}/view)
# set(INCLUDE_DIR ${SRC_DIR}/include)

# # T√¨m t·∫•t c·∫£ c√°c t·ªáp ngu·ªìn
# file(GLOB MODEL_SOURCES ${MODEL_DIR}/*.cpp)
# file(GLOB CONTROLLER_SOURCES ${CONTROLLER_DIR}/*.cpp)
# file(GLOB VIEW_SOURCES ${VIEW_DIR}/*.cpp)
# file(GLOB INCLUDE_SOURCES ${INCLUDE_DIR}/*.cpp)
# set(MAIN_SOURCE ${SRC_DIR}/main.cpp)

# # T·ªïng h·ª£p t·∫•t c·∫£ c√°c t·ªáp ngu·ªìn
# set(SOURCES ${MODEL_SOURCES} ${CONTROLLER_SOURCES} ${VIEW_SOURCES} ${INCLUDE_SOURCES} ${MAIN_SOURCE})

# # Th∆∞ m·ª•c ch·ª©a c√°c t·ªáp ƒë·ªëi t∆∞·ª£ng
# set(OBJ_DIR ${CMAKE_BINARY_DIR}/obj)

# # T·∫°o th∆∞ m·ª•c ch·ª©a t·ªáp ƒë·ªëi t∆∞·ª£ng n·∫øu ch∆∞a t·ªìn t·∫°i
# file(MAKE_DIRECTORY ${OBJ_DIR})

# # T·∫°o t·ªáp ƒë·ªëi t∆∞·ª£ng t·ª´ c√°c t·ªáp ngu·ªìn
# add_executable(main ${SOURCES})
# target_link_libraries(main ${LIBRARIES})

# # C·∫•u h√¨nh b√†i ki·ªÉm th·ª≠ (test)
# enable_testing()

# # T√¨m Google Test
# find_package(GTest REQUIRED)
# include_directories(${GTEST_INCLUDE_DIRS})

# # T√¨m c√°c b√†i ki·ªÉm th·ª≠ trong th∆∞ m·ª•c test
# file(GLOB TEST_SOURCES ${CMAKE_SOURCE_DIR}/test/*.cpp)
# add_executable(unit_tests ${TEST_SOURCES})

# # Li√™n k·∫øt c√°c th∆∞ vi·ªán c·∫ßn thi·∫øt cho b√†i ki·ªÉm th·ª≠
# target_link_libraries(unit_tests ${GTEST_LIBRARIES} GTest::Main pthread ${LIBRARIES})

# # Th√™m quy t·∫Øc ƒë·ªÉ ch·∫°y test
# add_test(NAME UnitTests COMMAND unit_tests)

# # Quy t·∫Øc d·ªçn d·∫πp
# add_custom_target(clean_all
#     COMMAND ${CMAKE_COMMAND} -E remove_directory ${CMAKE_BINARY_DIR}  # X√≥a th∆∞ m·ª•c build
#     COMMAND ${CMAKE_COMMAND} -E remove_directory ${CMAKE_SOURCE_DIR}/coverage_report  # X√≥a th∆∞ m·ª•c b√°o c√°o coverage
#     COMMENT "D·ªçn d·∫πp th∆∞ m·ª•c build v√† coverage_report"
# )
# # T·∫°o th∆∞ m·ª•c coverage_report n·∫øu ch∆∞a t·ªìn t·∫°i
# file(MAKE_DIRECTORY ${CMAKE_SOURCE_DIR}/coverage_report)
# # Quy t·∫Øc sinh b√°o c√°o coverage
# add_custom_target(coverage
#     COMMAND gcovr -r . source/controller --html --html-details -o coverage_report/index.html
#     COMMENT "T·∫°o b√°o c√°o coverage"
# )

# # Quy t·∫Øc m·∫∑c ƒë·ªãnh
# add_custom_target(build_all
#     DEPENDS unit_tests main
# )



# # Y√™u c·∫ßu phi√™n b·∫£n CMake
# cmake_minimum_required(VERSION 3.10)

# # ƒê·∫∑t t√™n project
# project(MyApplication)

# # ƒê·∫∑t c·ªù bi√™n d·ªãch v√† phi√™n b·∫£n C++
# set(CMAKE_CXX_STANDARD 17)
# set(CMAKE_CXX_STANDARD_REQUIRED ON)

# # C·ªù bi√™n d·ªãch cho vi·ªác thu th·∫≠p coverage
# set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wall -g -fprofile-arcs -ftest-coverage")
# set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -fprofile-arcs -ftest-coverage")

# # C√°c th∆∞ m·ª•c c·∫ßn th√™m v√†o ƒë∆∞·ªùng d·∫´n t√¨m ki·∫øm header
# include_directories(
#     /usr/local/include/taglib
#     /usr/local/include
#     ${CMAKE_SOURCE_DIR}/header
#     ${CMAKE_SOURCE_DIR}/header/include
#     ${CMAKE_SOURCE_DIR}/header/model
#     ${CMAKE_SOURCE_DIR}/header/controller
#     ${CMAKE_SOURCE_DIR}/header/view
# )

# # C√°c th∆∞ vi·ªán c·∫ßn li√™n k·∫øt
# link_directories(/usr/local/lib /usr/lib/x86_64-linux-gnu)
# set(LIBRARIES
#     avformat avcodec avutil swresample swscale
#     tag SDL2 SDL2_mixer SDL2_ttf SDL2_image stdc++fs z m pthread
# )

# # C√°c th∆∞ m·ª•c ch·ª©a t·ªáp ngu·ªìn
# set(SRC_DIR ${CMAKE_SOURCE_DIR}/source)
# set(MODEL_DIR ${SRC_DIR}/model)
# set(CONTROLLER_DIR ${SRC_DIR}/controller)
# set(VIEW_DIR ${SRC_DIR}/view)
# set(INCLUDE_DIR ${SRC_DIR}/include)

# # T√¨m t·∫•t c·∫£ c√°c t·ªáp ngu·ªìn
# file(GLOB MODEL_SOURCES ${MODEL_DIR}/*.cpp)
# file(GLOB CONTROLLER_SOURCES ${CONTROLLER_DIR}/*.cpp)
# file(GLOB VIEW_SOURCES ${VIEW_DIR}/*.cpp)
# file(GLOB INCLUDE_SOURCES ${INCLUDE_DIR}/*.cpp)
# set(MAIN_SOURCE ${SRC_DIR}/main.cpp)

# # T·ªïng h·ª£p t·∫•t c·∫£ c√°c t·ªáp ngu·ªìn
# set(SOURCES ${MODEL_SOURCES} ${CONTROLLER_SOURCES} ${VIEW_SOURCES} ${INCLUDE_SOURCES} ${MAIN_SOURCE})

# # Th∆∞ m·ª•c ch·ª©a c√°c t·ªáp ƒë·ªëi t∆∞·ª£ng
# set(OBJ_DIR ${CMAKE_BINARY_DIR}/obj)

# # T·∫°o th∆∞ m·ª•c ch·ª©a t·ªáp ƒë·ªëi t∆∞·ª£ng n·∫øu ch∆∞a t·ªìn t·∫°i
# file(MAKE_DIRECTORY ${OBJ_DIR})

# # T·∫°o t·ªáp ƒë·ªëi t∆∞·ª£ng t·ª´ c√°c t·ªáp ngu·ªìn
# add_executable(main ${SOURCES})
# target_link_libraries(main ${LIBRARIES})

# # C·∫•u h√¨nh b√†i ki·ªÉm th·ª≠ (test)
# enable_testing()

# # T√¨m Google Test
# find_package(GTest REQUIRED)
# include_directories(${GTEST_INCLUDE_DIRS})

# # T√¨m c√°c b√†i ki·ªÉm th·ª≠ trong th∆∞ m·ª•c test
# file(GLOB TEST_SOURCES ${CMAKE_SOURCE_DIR}/test/*.cpp)

# # ƒê·∫£m b·∫£o c√°c t·ªáp trong source/controller ƒë∆∞·ª£c bi√™n d·ªãch v·ªõi c·ªù coverage
# add_library(controller_lib ${CONTROLLER_SOURCES})
# target_compile_options(controller_lib PRIVATE -fprofile-arcs -ftest-coverage)
# target_link_libraries(controller_lib gcov)

# # T·∫°o executable cho test
# add_executable(unit_tests ${TEST_SOURCES})
# target_link_libraries(unit_tests ${GTEST_LIBRARIES} GTest::Main pthread ${LIBRARIES} controller_lib)

# # Th√™m quy t·∫Øc ƒë·ªÉ ch·∫°y test
# add_test(NAME UnitTests COMMAND unit_tests)

# # Quy t·∫Øc d·ªçn d·∫πp
# add_custom_target(clean_all
#     COMMAND ${CMAKE_COMMAND} -E remove_directory ${CMAKE_BINARY_DIR}  # X√≥a th∆∞ m·ª•c build
#     COMMAND ${CMAKE_COMMAND} -E remove_directory ${CMAKE_SOURCE_DIR}/coverage_report  # X√≥a th∆∞ m·ª•c b√°o c√°o coverage
#     COMMENT "D·ªçn d·∫πp th∆∞ m·ª•c build v√† coverage_report"
# )

# # T·∫°o th∆∞ m·ª•c coverage_report n·∫øu ch∆∞a t·ªìn t·∫°i
# file(MAKE_DIRECTORY ${CMAKE_SOURCE_DIR}/coverage_report)

# # Quy t·∫Øc sinh b√°o c√°o coverage
# add_custom_target(coverage
#     COMMAND ${CMAKE_COMMAND} -E make_directory ${CMAKE_SOURCE_DIR}/coverage_report
#     COMMAND gcovr -r ${CMAKE_SOURCE_DIR} ${CMAKE_SOURCE_DIR}/source/controller --html --html-details -o ${CMAKE_SOURCE_DIR}/coverage_report/index.html
#     COMMENT "T·∫°o b√°o c√°o coverage cho source/controller"
# )

# # Quy t·∫Øc m·∫∑c ƒë·ªãnh
# add_custom_target(build_all
#     DEPENDS unit_tests main
# )







# # Y√™u c·∫ßu phi√™n b·∫£n CMake
# cmake_minimum_required(VERSION 3.10)

# # ƒê·∫∑t t√™n project
# project(MyApplication)

# # ƒê·∫∑t c·ªù bi√™n d·ªãch v√† phi√™n b·∫£n C++
# set(CMAKE_CXX_STANDARD 17)
# set(CMAKE_CXX_STANDARD_REQUIRED ON)

# # C·ªù bi√™n d·ªãch cho vi·ªác thu th·∫≠p coverage
# set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wall -g -fprofile-arcs -ftest-coverage")
# set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -fprofile-arcs -ftest-coverage")

# # C√°c th∆∞ m·ª•c c·∫ßn th√™m v√†o ƒë∆∞·ªùng d·∫´n t√¨m ki·∫øm header
# include_directories(
#     /usr/local/include/taglib
#     /usr/local/include
#     ${CMAKE_SOURCE_DIR}/header
#     ${CMAKE_SOURCE_DIR}/header/include
#     ${CMAKE_SOURCE_DIR}/header/model
#     ${CMAKE_SOURCE_DIR}/header/controller
#     ${CMAKE_SOURCE_DIR}/header/view
# )

# # C√°c th∆∞ vi·ªán c·∫ßn li√™n k·∫øt
# link_directories(/usr/local/lib /usr/lib/x86_64-linux-gnu)
# set(LIBRARIES
#     avformat avcodec avutil swresample swscale
#     tag SDL2 SDL2_mixer SDL2_ttf SDL2_image stdc++fs z m pthread
# )

# # C√°c th∆∞ m·ª•c ch·ª©a t·ªáp ngu·ªìn
# set(SRC_DIR ${CMAKE_SOURCE_DIR}/source)
# set(MODEL_DIR ${SRC_DIR}/model)
# set(CONTROLLER_DIR ${SRC_DIR}/controller)
# set(VIEW_DIR ${SRC_DIR}/view)
# set(INCLUDE_DIR ${SRC_DIR}/include)

# # T√¨m t·∫•t c·∫£ c√°c t·ªáp ngu·ªìn
# file(GLOB MODEL_SOURCES ${MODEL_DIR}/*.cpp)
# file(GLOB CONTROLLER_SOURCES ${CONTROLLER_DIR}/*.cpp)
# file(GLOB VIEW_SOURCES ${VIEW_DIR}/*.cpp)
# file(GLOB INCLUDE_SOURCES ${INCLUDE_DIR}/*.cpp)
# set(MAIN_SOURCE ${SRC_DIR}/main.cpp)

# # T·ªïng h·ª£p t·∫•t c·∫£ c√°c t·ªáp ngu·ªìn
# set(SOURCES ${MODEL_SOURCES} ${CONTROLLER_SOURCES} ${VIEW_SOURCES} ${INCLUDE_SOURCES} ${MAIN_SOURCE})

# # Th∆∞ m·ª•c ch·ª©a c√°c t·ªáp ƒë·ªëi t∆∞·ª£ng
# set(OBJ_DIR ${CMAKE_BINARY_DIR}/obj)

# # T·∫°o th∆∞ m·ª•c ch·ª©a t·ªáp ƒë·ªëi t∆∞·ª£ng n·∫øu ch∆∞a t·ªìn t·∫°i
# file(MAKE_DIRECTORY ${OBJ_DIR})

# # T·∫°o t·ªáp ƒë·ªëi t∆∞·ª£ng t·ª´ c√°c t·ªáp ngu·ªìn
# add_executable(main ${SOURCES})
# target_link_libraries(main ${LIBRARIES})

# # C·∫•u h√¨nh b√†i ki·ªÉm th·ª≠ (test)
# enable_testing()

# # T√¨m Google Test
# find_package(GTest REQUIRED)
# include_directories(${GTEST_INCLUDE_DIRS})

# # T√¨m c√°c b√†i ki·ªÉm th·ª≠ trong th∆∞ m·ª•c test
# file(GLOB TEST_SOURCES ${CMAKE_SOURCE_DIR}/test/*.cpp)

# # ƒê·∫£m b·∫£o c√°c t·ªáp trong source/controller ƒë∆∞·ª£c bi√™n d·ªãch v·ªõi c·ªù coverage
# add_library(controller_lib ${CONTROLLER_SOURCES} ${MODEL_SOURCES} ${VIEW_SOURCES} ${INCLUDE_SOURCES})
# target_compile_options(controller_lib PRIVATE -fprofile-arcs -ftest-coverage)
# target_link_libraries(controller_lib gcov)

# # T·∫°o executable cho test
# add_executable(unit_tests ${TEST_SOURCES})
# target_link_libraries(unit_tests ${GTEST_LIBRARIES} GTest::Main pthread ${LIBRARIES} controller_lib)

# # Th√™m quy t·∫Øc ƒë·ªÉ ch·∫°y test
# add_test(NAME UnitTests COMMAND unit_tests)

# # Quy t·∫Øc d·ªçn d·∫πp
# add_custom_target(clean_all
#     COMMAND ${CMAKE_COMMAND} -E remove_directory ${CMAKE_BINARY_DIR}  # X√≥a th∆∞ m·ª•c build
#     COMMAND ${CMAKE_COMMAND} -E remove_directory ${CMAKE_SOURCE_DIR}/coverage_report  # X√≥a th∆∞ m·ª•c b√°o c√°o coverage
#     COMMENT "D·ªçn d·∫πp th∆∞ m·ª•c build v√† coverage_report"
# )

# # T·∫°o th∆∞ m·ª•c coverage_report n·∫øu ch∆∞a t·ªìn t·∫°i
# file(MAKE_DIRECTORY ${CMAKE_SOURCE_DIR}/coverage_report)

# # Quy t·∫Øc sinh b√°o c√°o coverage
# add_custom_target(coverage
#     COMMAND ${CMAKE_COMMAND} -E make_directory ${CMAKE_SOURCE_DIR}/coverage_report
#     COMMAND gcovr -r ${CMAKE_SOURCE_DIR} ${CMAKE_SOURCE_DIR}/source/controller --html --html-details -o ${CMAKE_SOURCE_DIR}/coverage_report/index.html
#     COMMENT "T·∫°o b√°o c√°o coverage cho source/controller"
# )

# # Quy t·∫Øc m·∫∑c ƒë·ªãnh
# add_custom_target(build_all
#     DEPENDS unit_tests main
# )





# Y√™u c·∫ßu phi√™n b·∫£n CMake
cmake_minimum_required(VERSION 3.10)

# ƒê·∫∑t t√™n project
project(MyApplication)

# ƒê·∫∑t c·ªù bi√™n d·ªãch v√† phi√™n b·∫£n C++
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# C·ªù bi√™n d·ªãch cho vi·ªác thu th·∫≠p coverage
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wall -g -fprofile-arcs -ftest-coverage")
set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -fprofile-arcs -ftest-coverage")

# Th√™m ƒë∆∞·ªùng d·∫´n t√¨m ki·∫øm cho GTest & GMock
set(CMAKE_PREFIX_PATH "/usr/local/lib/cmake")

# C√°c th∆∞ m·ª•c c·∫ßn th√™m v√†o ƒë∆∞·ªùng d·∫´n t√¨m ki·∫øm header
include_directories(
    /usr/local/include/taglib
    /usr/local/include
    ${CMAKE_SOURCE_DIR}/header
    ${CMAKE_SOURCE_DIR}/header/include
    ${CMAKE_SOURCE_DIR}/header/model
    ${CMAKE_SOURCE_DIR}/header/controller
    ${CMAKE_SOURCE_DIR}/header/view
)

# C√°c th∆∞ vi·ªán c·∫ßn li√™n k·∫øt
link_directories(/usr/local/lib /usr/lib/x86_64-linux-gnu)
set(LIBRARIES
    avformat avcodec avutil swresample swscale
    tag SDL2 SDL2_mixer SDL2_ttf SDL2_image stdc++fs z m pthread
)

# C√°c th∆∞ m·ª•c ch·ª©a t·ªáp ngu·ªìn
set(SRC_DIR ${CMAKE_SOURCE_DIR}/source)
set(MODEL_DIR ${SRC_DIR}/model)
set(CONTROLLER_DIR ${SRC_DIR}/controller)
set(VIEW_DIR ${SRC_DIR}/view)
set(INCLUDE_DIR ${SRC_DIR}/include)

# T√¨m t·∫•t c·∫£ c√°c t·ªáp ngu·ªìn
file(GLOB MODEL_SOURCES ${MODEL_DIR}/*.cpp)
file(GLOB CONTROLLER_SOURCES ${CONTROLLER_DIR}/*.cpp)
file(GLOB VIEW_SOURCES ${VIEW_DIR}/*.cpp)
file(GLOB INCLUDE_SOURCES ${INCLUDE_DIR}/*.cpp)
set(MAIN_SOURCE ${SRC_DIR}/main.cpp)

# T·ªïng h·ª£p t·∫•t c·∫£ c√°c t·ªáp ngu·ªìn
set(SOURCES ${MODEL_SOURCES} ${CONTROLLER_SOURCES} ${VIEW_SOURCES} ${INCLUDE_SOURCES} ${MAIN_SOURCE})

# Th∆∞ m·ª•c ch·ª©a c√°c t·ªáp ƒë·ªëi t∆∞·ª£ng
set(OBJ_DIR ${CMAKE_BINARY_DIR}/obj)

# T·∫°o th∆∞ m·ª•c ch·ª©a t·ªáp ƒë·ªëi t∆∞·ª£ng n·∫øu ch∆∞a t·ªìn t·∫°i
file(MAKE_DIRECTORY ${OBJ_DIR})

# T·∫°o t·ªáp ƒë·ªëi t∆∞·ª£ng t·ª´ c√°c t·ªáp ngu·ªìn
add_executable(main ${SOURCES})
target_link_libraries(main ${LIBRARIES})

# C·∫•u h√¨nh b√†i ki·ªÉm th·ª≠ (test)
enable_testing()

# üîç T√¨m Google Test v√† Google Mock
find_package(GTest REQUIRED)
find_library(GMOCK_LIB gmock HINTS /usr/local/lib)
find_library(GMOCK_MAIN_LIB gmock_main HINTS /usr/local/lib)

if(GMOCK_LIB AND GMOCK_MAIN_LIB)
    message(STATUS "Found GMock: ${GMOCK_LIB}, ${GMOCK_MAIN_LIB}")
    set(GMOCK_LIBRARIES ${GMOCK_LIB} ${GMOCK_MAIN_LIB})
else()
    message(FATAL_ERROR "GMock library not found!")
endif()

# Bao g·ªìm th∆∞ m·ª•c c·ªßa GTest & GMock
include_directories(${GTEST_INCLUDE_DIRS} /usr/local/include/gmock)

# T√¨m c√°c b√†i ki·ªÉm th·ª≠ trong th∆∞ m·ª•c test
file(GLOB TEST_SOURCES ${CMAKE_SOURCE_DIR}/test/*.cpp)

# ƒê·∫£m b·∫£o c√°c t·ªáp trong source/controller ƒë∆∞·ª£c bi√™n d·ªãch v·ªõi c·ªù coverage
add_library(controller_lib ${CONTROLLER_SOURCES} ${MODEL_SOURCES} ${VIEW_SOURCES} ${INCLUDE_SOURCES})
target_compile_options(controller_lib PRIVATE -fprofile-arcs -ftest-coverage)
target_link_libraries(controller_lib gcov)

# T·∫°o executable cho test
add_executable(unit_tests ${TEST_SOURCES})
target_link_libraries(unit_tests 
    ${GTEST_BOTH_LIBRARIES} 
    ${GMOCK_LIBRARIES} 
    GTest::GTest 
    GTest::Main 
    pthread 
    ${LIBRARIES} 
    controller_lib
)

# Th√™m quy t·∫Øc ƒë·ªÉ ch·∫°y test
add_test(NAME UnitTests COMMAND unit_tests)

# Quy t·∫Øc d·ªçn d·∫πp
add_custom_target(clean_all
    COMMAND ${CMAKE_COMMAND} -E remove_directory ${CMAKE_BINARY_DIR}  # X√≥a th∆∞ m·ª•c build
    COMMAND ${CMAKE_COMMAND} -E remove_directory ${CMAKE_SOURCE_DIR}/coverage_report  # X√≥a th∆∞ m·ª•c b√°o c√°o coverage
    COMMENT "D·ªçn d·∫πp th∆∞ m·ª•c build v√† coverage_report"
)

# T·∫°o th∆∞ m·ª•c coverage_report n·∫øu ch∆∞a t·ªìn t·∫°i
file(MAKE_DIRECTORY ${CMAKE_SOURCE_DIR}/coverage_report)

# Quy t·∫Øc sinh b√°o c√°o coverage
add_custom_target(coverage
    COMMAND ${CMAKE_COMMAND} -E make_directory ${CMAKE_SOURCE_DIR}/coverage_report
    COMMAND gcovr -r ${CMAKE_SOURCE_DIR} ${CMAKE_SOURCE_DIR}/source/controller --html --html-details -o ${CMAKE_SOURCE_DIR}/coverage_report/index.html
    COMMENT "T·∫°o b√°o c√°o coverage cho source/controller"
)

# Quy t·∫Øc m·∫∑c ƒë·ªãnh
add_custom_target(build_all
    DEPENDS unit_tests main
)

